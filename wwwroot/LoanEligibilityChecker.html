<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Python Azure Function App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body {background: #f7f9fb; font-family: 'Segoe UI', Arial, sans-serif; margin: 0; padding: 0;}
        .container {max-width: 420px; margin: 60px auto; background: #fff; padding: 32px 28px 22px 28px; border-radius: 18px; box-shadow: 0 2px 16px rgba(0,0,0,0.09);}
        .title {font-size: 1.7em; color: #2851e3; margin-bottom: 6px; text-align: center; font-weight: bold;}
        .subtitle {font-size: 1.18em; color: #333; margin-bottom: 24px; text-align: center; font-weight: 500; letter-spacing: .5px;}
        label {font-weight: 500; color: #34495e;}
        input[type="text"], input[type="number"] {width: 100%; padding: 9px; margin: 7px 0 19px 0; border: 1.2px solid #d0d5db; border-radius: 7px; font-size: 1em; outline: none; transition: border .2s;}
        input[type="text"]:focus, input[type="number"]:focus {border-color: #2851e3;}
        button {width: 100%; padding: 12px 0; background: #2851e3; color: #fff; border: none; border-radius: 7px; font-size: 1.06em; font-weight: 600; cursor: pointer; transition: background .2s; margin-top: 8px;}
        button:hover {background: #1d3cbb;}
        #result {margin-top: 19px; font-size: 1.1em; font-weight: 500; text-align: center;}
    </style>
</head>
<body>
    <div class="container">
        <div class="title">Python Azure Function App</div>
        <div class="subtitle">Loan Eligibility Checker</div>
        <form id="loanForm">
            <label for="name">Full Name</label>
            <input type="text" id="name" required />

            <label for="age">Age</label>
            <input type="number" id="age" min="18" required />

            <label for="creditScore">Credit Score (300-900)</label>
            <input type="number" id="creditScore" min="300" max="900" required />

            <label for="salary">Monthly Salary (₹)</label>
            <input type="number" id="salary" min="0" required />

            <label for="existingEmi">Existing EMI (₹ per month)</label>
            <input type="number" id="existingEmi" min="0" required />

            <label for="amount">Loan Amount (₹)</label>
            <input type="number" id="amount" min="0" required />

            <button type="submit">Check Eligibility</button>
        </form>
        <div id="result"></div>
    </div>
    <script>
        document.getElementById('loanForm').onsubmit = async function(e) {
            e.preventDefault();
            document.getElementById('result').innerText = "Checking eligibility...";
            try {
                const res = await fetch('/api/CheckLoanEligibility', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        name: document.getElementById('name').value,
                        age: parseInt(document.getElementById('age').value),
                        creditScore: parseInt(document.getElementById('creditScore').value),
                        salary: parseFloat(document.getElementById('salary').value),
                        existingEmi: parseFloat(document.getElementById('existingEmi').value),
                        amount: parseFloat(document.getElementById('amount').value)
                    })
                });
                const data = await res.json();
                document.getElementById('result').innerText = (data.isEligible !== undefined)
                    ? (data.isEligible
                        ? '✅ Eligible: ' + data.reason
                        : '❌ Not Eligible: ' + data.reason)
                    : 'Eligibility check failed.';
            } catch (ex) {
                document.getElementById('result').innerText = "Error checking eligibility. Please try again.";
            }
        };
    </script>
</body>
</html>
